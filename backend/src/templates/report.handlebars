<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Interview Report ‚Äî {{coalesce candidate.name "Candidate"}} √ó {{coalesce company.name "Company"}}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b1020;
      --ink:#0f172a;           /* slate-900 */
      --muted:#64748b;         /* slate-500 */
      --line:#e2e8f0;          /* slate-200 */
      --card:#ffffff;
      --brand:#4f46e5;         /* indigo-600 */
      --brand-2:#7c3aed;       /* violet-600 */
      --green:#10b981;
      --red:#ef4444;
      --amber:#f59e0b;
      --cyan:#06b6d4;
      --shadow:0 10px 30px rgba(2,6,23,0.08);
      --radius:14px;
    }

    html,body{margin:0;padding:0;background:#f6f7fb;color:var(--ink);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji';}
    h1{font-size:28px;line-height:1.2;margin:0;}
    h2{font-size:20px;line-height:1.35;margin:0 0 10px;border-bottom:2px solid var(--line);padding-bottom:6px;}
    h3{font-size:15px;margin:0 0 6px;}
    .small{font-size:12px}
    .muted{color:var(--muted)}
    a{color:var(--brand);text-decoration:none}

    .wrap{max-width:960px;margin:24px auto;padding:0 16px}
    .hero{
      background:linear-gradient(135deg,var(--brand) 0%,var(--brand-2) 100%);
      color:#fff;border-radius:20px;padding:28px;box-shadow:var(--shadow);
    }
    .hero h1{font-weight:800;letter-spacing:.2px}
    .hero .meta{opacity:.9;margin-top:6px}
    .grid{display:grid;gap:14px}
    .grid-2{grid-template-columns:1fr 1fr}
    .grid-3{grid-template-columns:repeat(3,1fr)}
    .grid-4{grid-template-columns:repeat(4,1fr)}
    @media (max-width:900px){.grid-3,.grid-4{grid-template-columns:1fr 1fr}}
    @media (max-width:640px){.grid-2,.grid-3,.grid-4{grid-template-columns:1fr}}

    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
    .chip{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:2px 8px;font-weight:600;font-size:12px;background:#fff}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;background:#eef2ff;color:#3730a3;font-size:12px;font-weight:700}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border:1px solid var(--line);padding:8px;vertical-align:top}
    .table th{background:#f8fafc;text-align:left;font-weight:700}
    ul{margin:6px 0 2px 0;padding-left:1.05em} /* puces compactes */
    .section{margin:18px 0;page-break-inside:avoid}

    .news{display:grid;gap:14px}
    .news-3{grid-template-columns:repeat(3,1fr)}
    .news .item{position:relative;background:#fff;border:1px solid var(--line);border-radius:16px;padding:14px;box-shadow:var(--shadow)}
    .news .item .bar{position:absolute;inset-inline:0;top:0;height:3px;background:linear-gradient(90deg,#0ea5e9,#6366f1,#a855f7)}
    .news .item h4{margin:6px 0 4px;font-size:15px;line-height:1.35}
    .news .meta{font-size:12px;color:var(--muted)}
    .tag{display:inline-block;font-size:11px;border:1px solid #e9d5ff;color:#7c3aed;background:#faf5ff;border-radius:999px;padding:2px 8px}

    .kpi{display:flex;gap:8px;align-items:center}
    .kpi .dot{width:10px;height:10px;border-radius:999px}
    .kpi.green .dot{background:var(--green)}
    .kpi.amber .dot{background:var(--amber)}
    .kpi.red .dot{background:var(--red)}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header -->
    <div class="hero">
      <h1>Interview Report</h1>
      <div class="meta small">
        Candidate: <strong>{{coalesce candidate.name "‚Äî"}}</strong> ‚Ä¢
        Role: <strong>{{coalesce role.title "‚Äî"}}</strong> ‚Ä¢
        Company: <strong>{{coalesce company.name "‚Äî"}}</strong>
        {{#if generatedAt}} ‚Ä¢ Generated at {{generatedAt}}{{/if}}
      </div>
    </div>

    <!-- Business Model (Canvas) -->
    {{#if (or company.businessModel (or (notEmpty company.valueProps) (or (notEmpty company.keyPartners) (or (notEmpty company.keyActivities) (or (notEmpty company.keyResources) (or (notEmpty company.customerRelationships) (or (notEmpty company.channels) (or (notEmpty company.customerSegments) (or (notEmpty company.costStructure) (notEmpty company.revenueStreams))))))))))}}
    <div class="section">
      <h2>üè¢ Business model</h2>

      {{#if company.businessModel}}
      <div class="card">
        <div class="small muted">Summary</div>
        <div>{{company.businessModel}}</div>
      </div>
      {{/if}}

      <div class="grid grid-3" style="margin-top:10px">
        {{#if (notEmpty company.valueProps)}}
          <div class="card">
            <h3>Value propositions</h3>
            <ul>{{#each company.valueProps}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.customerSegments)}}
          <div class="card">
            <h3>Customer segments</h3>
            <ul>{{#each company.customerSegments}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.channels)}}
          <div class="card">
            <h3>Channels</h3>
            <ul>{{#each company.channels}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.keyActivities)}}
          <div class="card">
            <h3>Key activities</h3>
            <ul>{{#each company.keyActivities}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.keyResources)}}
          <div class="card">
            <h3>Key resources</h3>
            <ul>{{#each company.keyResources}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.keyPartners)}}
          <div class="card">
            <h3>Key partners</h3>
            <ul>{{#each company.keyPartners}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.customerRelationships)}}
          <div class="card">
            <h3>Customer relationships</h3>
            <ul>{{#each company.customerRelationships}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.costStructure)}}
          <div class="card">
            <h3>Cost structure</h3>
            <ul>{{#each company.costStructure}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
        {{#if (notEmpty company.revenueStreams)}}
          <div class="card">
            <h3>Revenue streams</h3>
            <ul>{{#each company.revenueStreams}}<li>{{this}}</li>{{/each}}</ul>
          </div>
        {{/if}}
      </div>
    </div>
    {{/if}}

    <!-- Strategy (ex-SWOT) -->
    {{#if strategy}}
    <div class="section">
      <h2>üß≠ Company strategy</h2>
      <div class="grid grid-4">
        <div class="card">
          <h3>Strengths</h3>
          {{#if strategy.strengths}}
            <ul>{{#each strategy.strengths}}<li>{{this}}</li>{{/each}}</ul>
          {{else}}<div class="small muted">‚Äî</div>{{/if}}
        </div>
        <div class="card">
          <h3>Weaknesses</h3>
          {{#if strategy.weaknesses}}
            <ul>{{#each strategy.weaknesses}}<li>{{this}}</li>{{/each}}</ul>
          {{else}}<div class="small muted">‚Äî</div>{{/if}}
        </div>
        <div class="card">
          <h3>Opportunities</h3>
          {{#if strategy.opportunities}}
            <ul>{{#each strategy.opportunities}}<li>{{this}}</li>{{/each}}</ul>
          {{else}}<div class="small muted">‚Äî</div>{{/if}}
        </div>
        <div class="card">
          <h3>Threats</h3>
          {{#if strategy.threats}}
            <ul>{{#each strategy.threats}}<li>{{this}}</li>{{/each}}</ul>
          {{else}}<div class="small muted">‚Äî</div>{{/if}}
        </div>
      </div>

      {{#if company.topNews}}
      <div class="section">
        <h3>üì∞ Top news (last 18 months)</h3>
        <div class="news news-3 grid">
          {{#each company.topNews}}
          <article class="item">
            <div class="bar"></div>
            {{#if category}}<span class="tag">{{category}}</span>{{/if}}
            <h4>
              {{#if url}}<a href="{{url}}">{{title}}</a>{{else}}{{title}}{{/if}}
            </h4>
            {{#if summary}}<div class="small" style="margin-top:4px">{{summary}}</div>{{/if}}
            <div class="meta" style="margin-top:6px">
              {{#if source}}{{source}}{{else}}‚Äî{{/if}} ¬∑ {{#if date}}{{date}}{{else}}‚Äî{{/if}}
            </div>
          </article>
          {{/each}}
        </div>
      </div>
      {{/if}}
    </div>
    {{/if}}

    <!-- Profile & Experience Matching -->
    {{#if profileMatch}}
    <div class="section">
      <h2>üë§ Profile & experience matching</h2>

      {{#if profileMatch.matchScore}}
        <div class="kpi {{#if (and (not (eq profileMatch.matchScore null)) (or (and (not (eq profileMatch.matchScore null)) (gte profileMatch.matchScore 75)) (eq profileMatch.matchScore 100)))}}green{{else}}{{#if (and (not (eq profileMatch.matchScore null)) (gte profileMatch.matchScore 50))}}amber{{else}}red{{/if}}{{/if}}">
          <span class="dot"></span>
          <span class="pill">Overall score: {{profileMatch.matchScore}}%</span>
        </div>
      {{/if}}

      <div class="card" style="margin-top:10px">
        <table class="table">
          <thead>
            <tr><th>Requirements</th><th>Experience</th><th class="right">Score</th></tr>
          </thead>
          <tbody>
            {{#each profileMatch.items}}
              <tr>
                <td>{{requirement}}</td>
                <td>{{evidence}}</td>
                <td class="right">{{#if score}}{{score}}%{{else}}‚Äî{{/if}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
    {{/if}}

    <!-- The Why -->
    {{#if why}}
    <div class="section">
      <h2>‚ùì The why</h2>
      <div class="grid grid-2">
        <div class="card">
          <h3>Why this company?</h3>
          {{#if why.whyCompany}}
            <ul>{{#each why.whyCompany}}<li>{{this}}</li>{{/each}}</ul>
          {{else}}<div class="small muted">‚Äî</div>{{/if}}
        </div>
        <div class="card">
          <h3>Why this role?</h3>
          {{#if why.whyRole}}
            <ul>{{#each why.whyRole}}<li>{{this}}</li>{{/each}}</ul>
          {{else}}<div class="small muted">‚Äî</div>{{/if}}
        </div>
      </div>
      <div class="card" style="margin-top:10px">
        <h3>Why you / why now?</h3>
        {{#if why.whyYou}}
          <ul>{{#each why.whyYou}}<li>{{this}}</li>{{/each}}</ul>
        {{else}}<div class="small muted">‚Äî</div>{{/if}}
      </div>
    </div>
    {{/if}}

    <!-- Interview Q&A -->
    {{#if interview}}
    <div class="section">
      <h2>üí¨ Interview questions & answers</h2>

      {{#if interview.questionsForCandidate}}
        <h3>Company ‚Üí Candidate</h3>
        {{#each interview.questionsForCandidate}}
          <div class="card" style="margin:8px 0">
            <div><strong>Q.</strong> {{question}}</div>
            {{#if answer}}<div style="margin-top:6px"><strong>A.</strong> {{answer}}</div>{{/if}}
            {{#if note}}<div class="small muted" style="margin-top:6px">{{note}}</div>{{/if}}
          </div>
        {{/each}}
      {{/if}}

      {{#if interview.questionsForCompany}}
        <h3 style="margin-top:10px">Candidate ‚Üí Company</h3>
        {{#each interview.questionsForCompany}}
          <div class="card" style="margin:8px 0">
            <div><strong>Q.</strong> {{question}}</div>
            {{#if note}}<div class="small muted" style="margin-top:6px">{{note}}</div>{{/if}}
          </div>
        {{/each}}
      {{/if}}
    </div>
    {{/if}}

  </div>
</body>
</html>
